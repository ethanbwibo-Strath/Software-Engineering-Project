<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Make a Payment</title>
    <!-- Bootstrap CSS -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom CSS -->
    <link href="style.css" rel="stylesheet">
    <style>
        /* Loader styling */
        .loader-container {
            display: none; /* Initially hidden */
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(255, 255, 255, 0.8);
            align-items: center;
            justify-content: center;
            z-index: 10;
            text-align: center; /* Centering text below the loader */
        }

        .loader {
            width: 7rem;
            height: 7rem;
            border: 8px solid #d1d5db; /* Gray border */
            border-top: 8px solid #34B233; /* M-Pesa green */
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            animation: spin 1s linear infinite;
            margin-bottom: 20px; /* Adds space between spinner and text */
        }

        /* Spinner animation */
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* M-Pesa logo styling */
        .logo {
            width: 2.5rem; /* Adjust size as needed */
            height: 2.5rem;
        }

        /* Styling for the text under the loader */
        .loader-text {
            font-size: 1.2rem;
            color: #34B233; /* M-Pesa green color */
            font-weight: bold;
        }
    </style>
</head>
<body>

    <div class="container">
        <div class="payment-container" id="paymentContainer"> <!-- Added ID here -->
            <h2 class="payment-header">M-Pesa Payment</h2>
            <form action="stkpush.php" method="POST" id="PaymentForm">
                <div class="mb-3">
                    <label for="phone" class="form-label">Phone Number</label>
                    <input type="text" class="form-control" id="phone" name="phone" placeholder="2547XXXXXXXX" required>
                </div>
                <div class="mb-3">
                    <label for="amount" class="form-label">Amount</label>
                    <input type="number" class="form-control" id="amount" name="amount" min="1" required>
                </div>
                <button type="submit" class="btn btn-mpesa">Pay Now</button>
            </form>
        </div>
    </div>

    <!-- Loader with M-Pesa logo inside and payment processing text -->
    <div id="loaderContainer" class="loader-container">
        <div class="loader">
            <img src="../../img/Mpesalogo.png" alt="M-Pesa Logo" class="logo">
        </div>
        <div class="loader-text">Payment Processing...</div> <!-- Text below the loader -->
    </div>

    <!-- Bootstrap JS (optional) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/js/bootstrap.bundle.min.js"></script>

    <script>
        // JavaScript to show the loader and hide the form when submitted
        document.getElementById("PaymentForm").addEventListener("submit", function(event) {
            // Hide the form container
            document.getElementById("paymentContainer").style.display = "none";

            // Show the loader with processing message
            document.getElementById("loaderContainer").style.display = "flex";
        });
    </script>
</body>
</html>
